\tikzset{XOR/.style={draw,circle,append after command={
[shorten >=\pgflinewidth, shorten <=\pgflinewidth,]
(\tikzlastnode.north) edge (\tikzlastnode.south)
(\tikzlastnode.east) edge (\tikzlastnode.west)
}}}

\tikzset{wire/.style = {thick,rounded corners=1.5pt}}
\tikzset{AND/.style={draw, circle}}
\tikzset{DOT/.style={fill, circle, inner sep=0cm, minimum size=1.5mm}}



\begin{tikzpicture}[
roundnode/.style={circle, draw=green!60, fill=green!5, very thick, minimum size=7mm},
square/.style={rectangle, minimum size=1cm},
]

    \node[square,draw] (1) at (2,11) {$s_1$};
    \draw (2.5,10.5) rectangle (4.5,11.5);
    \node[square,draw] (66) at (5,11) {$s_{66}$};
    \node[square,draw] (empty) at (6,11) {};
    \node[square,draw] (69) at (7,11) {$s_{69}$};
    \node[square,draw] (empty) at (8,11) {};
    \node[square,draw] (91) at (9,11) {$s_{91}$};
    \node[square,draw] (92) at (10,11) {$s_{92}$};
    \node[square,draw] (93) at (11,11) {$s_{93}$};

    \node[square,draw] (94) at (2,7) {$s_{94}$};
    \draw (2.5,6.5) rectangle (4.5,7.5);
    \node[square,draw] (162) at (5,7) {$s_{162}$};
    \node[square,draw] (empty) at (6,7) {};
    \node[square,draw] (171) at (7,7) {$s_{171}$};
    \node[square,draw] (empty) at (8,7) {};
    \node[square,draw] (175) at (9,7) {$s_{175}$};
    \node[square,draw] (176) at (10,7) {$s_{176}$};
    \node[square,draw] (177) at (11,7) {$s_{177}$};
    \node[XOR] (x177) at (11,8) {};

    \node[square,draw] (178) at (2,3) {$s_{178}$};
    \draw (2.5,2.5) rectangle (4.5,3.5);
    \node[square,draw] (243) at (5,3) {$s_{243}$};
    \node[square,draw] (empty) at (6,3) {};
    \node[square,draw] (264) at (7,3) {$s_{264}$};
    \node[square,draw] (empty) at (8,3) {};
    \node[square,draw] (286) at (9,3) {$s_{286}$};
    \node[square,draw] (287) at (10,3) {$s_{287}$};
    \node[square,draw] (288) at (11,3) {$s_{288}$};

    \node[XOR] (x93) at (11,12) {};
    \node[XOR] (L1) at (12,10){};
    \node[AND] (a92) at (10,10) {$\cdot$};
    \node[XOR] (x1) at (0,10) {};
    \node[XOR] (x171) at (7,9) {};
    \node[XOR] (z) at (13,8) {};
    \node[XOR] (L2) at (12,6){};
    \node[AND] (a176) at (10,6){$\cdot$};
    \node[XOR] (x264) at (7,5) {};
    \node[XOR] (x288) at (11,4) {};
    \node[XOR] (L3) at (12,2){};
    \node[AND] (a287) at (10,2){$\cdot$};
    \node[DOT] (d1) at (12,12) {};
    \node[DOT] (d2) at (12,8) {};
    \node[DOT] (d3) at (12,4) {};
    \node (zi) at (14,8) {$z_i$};

    \draw[wire,->](d1)--(L1);
    \draw[wire,->](d2)--(L2);
    \draw[wire,->](d3)--(L3);
    \draw[wire,->](x1)--(0,11)--(1);
    \draw[wire,->](66)--(5,12)--(x93);
    \draw[wire,->](69)--(7,10)--(x1);
    \draw[wire,->](91)--(9,10)--(a92);
    \draw[wire,->](92)--(a92);
    \draw[wire,->](a92)--(L1);
    \draw[wire,->](93)--(x93);
    \draw[wire,->](x93)--(13,12)--(z);
    \draw[wire,->](L1)--(12,9)--(x171);

    \draw[wire,->](162)--(5,8)--(x177);
    \draw[wire,->](171)--(x171);
    \draw[wire,->](x171)--(1,9)--(1,7)--(94);
    \draw[wire,->](177)--(x177);
    \draw[wire,->](175)--(9,6)--(a176);
    \draw[wire,->](176)--(a176);
    \draw[wire,->](a176)--(L2);
    \draw[wire,->](x177)--(z);
    \draw[wire,->](L2)--(12,5)--(x264);

    \draw[wire,->](243)--(5,4)--(x288);
    \draw[wire,->](264)--(x264);
    \draw[wire,->](x264)--(1,5)--(1,3)--(178);
    \draw[wire,->](286)--(9,2)--(a287);
    \draw[wire,->](287)--(a287);
    \draw[wire,->](a287)--(L3);
    \draw[wire,->](288)--(x288);
    \draw[wire,->](x288)--(13,4)--(z);
    \draw[wire,->](L3)--(12,1)--(0,1)--(x1);

    \draw[wire,->](z)--(13.8,8);
\end{tikzpicture}
